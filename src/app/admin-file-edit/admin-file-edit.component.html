<div>
    <p><b>Загрузка файлов</b></p>
</div>
<div class="file-edit">
    <div class="file-edit-space">
        <div class="file-table">
            <table>
                <thead>
                <tr>
                    <th>Имя</th>
                    <th>Дата</th>
                    <th>Расширение имени файла</th>
                    <th>Тип использования</th>
                    <th>Предпросмотр</th>
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let file of listFiles; let i = index">
                    <td>{{file.nameFile}}</td>
                    <td>{{file.createdDate }}</td>
                    <td>{{file.typeFile.split('/')[1] }}</td>
                    <td>{{file.destination.nameDestination}}</td>
                    <td>
                        <div class="edit-button">
                            <button (click)="setIdAndTypeFile(file.id, file.typeFile)"><img src="assets/new-window.svg">
                            </button>
                        </div>
                    </td>
                    <td>
                        <div class="edit-button">
                            <button (click)="deleteFile(file.id, i)" [disabled]="edit"><img
                                    [src]=" edit===false? 'assets/trash.svg': null "></button>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
        <div class="file-edit-preview" *ngIf="idFile !== null">
            <img [src]="previewImage()">
        </div>
    </div>

</div>

<button (click)="close=true">Файлы</button>
<div class="file-popup" *ngIf="close">
  <div class="file-popup-content">
    <div class="file-popup-header">
      <div>
        <p><strong>Загрузите файл</strong></p>
      </div>
      <div class="edit-button">
        <button (click)="close=false"><img src="assets/icons/x.svg"></button>
      </div>
    </div>

    <div class="file-popup-content-area">
      <div>
        <label>
          <input type="file" multiple (change)="selectFiles($event)"/>
        </label>
        <table>
          <thead>
          <tr>
            <th>1asdasd</th>
            <th>2afasfsdfd</th>
          </tr>
          </thead>
          <tbody>
          <tr *ngFor="let file of selectedFile">
            <td>{{file.file.name}}</td>
            <td>
              <select [(ngModel)]="file.destination">
                <option *ngFor="let destination of listDestination"
                        [ngValue]="destination">{{destination.nameDestination}}</option>
              </select>
            </td>
          </tr>
          </tbody>
        </table>
      </div>
      <div *ngFor="let progressInfo of progressInfos">
        <span>{{ progressInfo.fileName }}</span>
        <div>
          <div
            role="progressbar"
            attr.aria-valuenow="{{ progressInfo.value }}"
            aria-valuemin="0"
            aria-valuemax="100"
            [ngStyle]="{ width: progressInfo.value + '%' }">
            {{ progressInfo.value }}%
          </div>
        </div>
      </div>

      <div *ngIf="message.length" role="alert">
        <ul *ngFor="let msg of message; let i = index">
          <li>{{ msg }}</li>
        </ul>
      </div>
    </div>
    <div class="file-popup-save">
      <button [disabled]="!selectedFile" (click)="uploadFiles()">Загрузить</button>
    </div>
  </div>
</div>
